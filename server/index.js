const express = require('express')
const app = express()
const Routes = express.Router()
const dotenv = require('dotenv')
const { getHomeContent } = require('./controller/home.controller')
const { getConnections, createConnection } = require('./controller/connections.controller')
const { getGroups, createGroup } = require('./controller/groups.controller')
const { getSettings, updateSettings, deleteUser } = require('./controller/setting.controller')
const { createUser } = require('./controller/signup.controller')

dotenv.config()

Routes.route('/')
    .get(getHomeContent)
Routes.route('/signup')
    .post(createUser)
Routes.route('/connections')
    .get(getConnections)
    .post(createConnection)
Routes.route('/groups')
    .get(getGroups)
    .post(createGroup)
Routes.route('/setting')
    .get(getSettings)
    .put(updateSettings)
    .delete(deleteUser)
app.use('/', Routes)
app.all('*', (req, res) => {
    res.send('404 Not Found. Please check url')
})
app.use(express.json());

app.listen(process.env.SERVER_PORT, () => console.log(`Server listening on port ${process.env.SERVER_PORT}`))